name: Publish to TestPyPi
on:
  release:
    types:
      - created
      - published
jobs:
    build:
      name: Build distribution
      runs-on: ubuntu-latest
      permissions:
        id-token: write
      environment: release
      steps:
        - uses: actions/checkout@v4
        - name: Setup PDM
          uses: pdm-project/setup-pdm@v4
        - name: upload to testpypi
          run: pdm publish --repository testpypi